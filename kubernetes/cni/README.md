# CNI(Container Network Interface)
**쿠버네티스 클러스터 내의 컨테이너 네트워크를 관리하기 위한 표준 인터페이스**

**CNI는 컨테이너를 생성하는 runtime 과 네트워크 플러그인 간의 통신을 위한 API를 제공한다.**

### 사전지식
#### [Docker Network](https://github.com/royroyee/gonet/tree/main/docker)


## 기능

### 1. 컨테이너 네트워크 생성 및 관리
- CNI 를 이용하여 컨테이너가 생성될 때마다 자동으로 네트워크 인터페이스를 생성하고 IP 주소를 할당 
  - `네트워크 인터페이스` : 컴퓨터와 네트워크 간의 통신을 위한 하드웨어와 소프트웨어의 결합체로 컴퓨터 시스템에서 네트워크에 연결되어 있는 입출력 장치 
### 2. 네트워크 플러그인의 확장성
- CNI는 표준 인터페이스를 제공하기 때문에, 다양한 네트워크 플러그인을 사용할 수 있다.

### 3. 다양한 네트워크 모델 지원
- CNI는 다양한 네트워크 모델을 지원한다. 
  - VXLAN, GRE, Calico 등

### 4. 네트워크 정책 적용
- CNI를 이용하여 네트워크 정책을 적용할 수 있다. 이를 통해 컨테이너 간의 통신을 제어할 수 있다.

---

## CNI 플러그인 (kubernetes)
- CNI API를 구현한 것으로 쿠버네티스 클러스터 내의 컨테이너 간 통신을 위한 네트워크를 설정 및 관리하는 역할
- 컨테이너가 생성될 때마다 자동으로 네트워크 인터페이스를 생성하고 IP 주소를 할당한다.
  - 이렇게 생성된 인터페이스를 통해 컨테이너끼리 통신을 가능하게 한다.
- CNI 플러그인은 각 노드에서 실행 중인 컨테이너에 대한 네트워크를 설정하므로 마이크로서비스 아키텍처와 같은 분산 시스템에서 확장성과 유연성을 제공한다.
- 쿠버네티스 뿐만 아니라 다른 컨테이너 오케스트레이션 시스템에서도 사용될 수 있는 범용적인 네트워크 인터페이스 API
  - 따라서 다양한 CNI 플러그인이 존재한다.
- 네트워크 정책 적용 외에도 다양한 기능을 구현할 수 있다.
  - 서비스 디스커버리, 로드 밸런싱, SSL 인증서 관리 등의 기능 구현 가능

### 대표적인 쿠버네티스 네트워크 플러그인
- `Flannel` : 쿠버네티스 클러스터 내 호스트 간의 네트워크 연결을 구성하는 가장 기본적인 네트워크 플러그인
- `Calico` : BGP 기반의 네트워크 플러그인으로, 보안 기능이 강화된 플러그인
- `Cilium` : 쿠버네티스 클러스터 내에서 매우 빠른 네트워크 처리를 지원하는 플러그인
- `Weave Net` : 쿠버네티스 클러스터 내 호스트 간의 네트워크 연결을 구성하는 데 사용되며, 단일 호스트 내의 컨테이너 간의 통신도 가능하다.

